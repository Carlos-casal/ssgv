{% extends 'base.html.twig' %}

{% block body %}
<div class="flex h-screen bg-gray-50 relative">
    <!-- Sidebar -->
    {% include 'layout/sidebar.html.twig' %}

    <!-- Overlay for mobile when sidebar is open -->
    <div id="sidebar-overlay" class="hidden lg:hidden fixed inset-0 bg-black bg-opacity-50 z-20"></div>
    
    <!-- Main content -->
    <div class="flex-1 flex flex-col overflow-hidden">
        <header class="bg-white shadow-sm border-b border-gray-200 px-4 py-2 lg:hidden">
             <button id="sidebar-toggle" class="p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors">
                <i data-lucide="menu" class="w-6 h-6"></i>
            </button>
        </header>
        <!-- Main content area -->
        <main class="flex-1 overflow-y-auto">
            {% for message in app.flashes('success') %}
                <div class="mx-6 mt-4 p-4 bg-green-50 border border-green-200 rounded-lg">
                    <div class="flex items-center">
                        <i data-lucide="check-circle" class="w-5 h-5 text-green-500 mr-2"></i>
                        <span class="text-green-800">{{ message }}</span>
                    </div>
                </div>
            {% endfor %}
            
            {% for message in app.flashes('error') %}
                <div class="mx-6 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg">
                    <div class="flex items-center">
                        <i data-lucide="alert-circle" class="w-5 h-5 text-red-500 mr-2"></i>
                        <span class="text-red-800">{{ message }}</span>
                    </div>
                </div>
            {% endfor %}
            
            {% block content %}{% endblock %}
        </main>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const sidebar = document.getElementById('sidebar');
    const toggleButton = document.getElementById('sidebar-toggle');
    const overlay = document.getElementById('sidebar-overlay');

    function toggleSidebar() {
        sidebar.classList.toggle('-translate-x-full');
        sidebar.classList.toggle('translate-x-0');
        overlay.classList.toggle('hidden');
    }

    if (toggleButton) {
        toggleButton.addEventListener('click', toggleSidebar);
    }

    if (overlay) {
        overlay.addEventListener('click', toggleSidebar);
    }
});
</script>
{% endblock %}