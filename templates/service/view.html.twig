{% extends 'layout/app.html.twig' %}

{% block title %}Detalles del Servicio{% endblock %}

{% block content %}
<div class="p-6">
    <div class="bg-white p-6 rounded-lg shadow-md">
        <h2 class="text-xl font-bold mb-4 border-b pb-2">Resumen del Servicio para WhatsApp</h2>

        <div class="whitespace-pre-wrap font-mono text-sm bg-gray-50 p-4 rounded-md">
            <strong>{{ service.startDate|format_datetime(locale='es', pattern='EEEE d ''de'' MMMM')|capitalize }}</strong>
            <strong>{{ service.title }}</strong>

            H. Base: {{ service.timeAtBase ? service.timeAtBase|date('H:i') : 'N/A' }}
            H. Salida: {{ service.departureTime ? service.departureTime|date('H:i') : 'N/A' }}
            Fin: {{ service.endDate ? service.endDate|date('H:i') : 'N/A' }} aprox

            Descripci√≥n:
            {{ service.description|raw }}

            {% if service.hasProvisions %}
            Avituallamiento: S√≠
            {% endif %}

            {% if service.afluencia %}
            Afluencia: {{ service.afluencia|capitalize }} {% if service.afluencia == 'alta' %}üî¥{% endif %}
            {% endif %}

            {% if service.numSvb > 0 or service.numSva > 0 or service.numSvae > 0 %}
            Ambulancias:
                {% if service.numSvb > 0 %}> {{ service.numSvb }} SVB üöë{% endif %}
                {% if service.numSva > 0 %}> {{ service.numSva }} SVA üöë{% endif %}
                {% if service.numSvae > 0 %}> {{ service.numSvae }} SVAE üöë{% endif %}
            {% endif %}

            {% set medicos = service.numMedico|default(0) %}
            {% set enfermeros = service.numEnfermero|default(0) %}

            {% if medicos > 0 or enfermeros > 0 %}

            Personal Sanitario:
                {% if medicos > 0 and enfermeros > 0 %}
                    > {{ medicos }} M√©dico(s) ü•º y {{ enfermeros }} Enfermero(s) ü©∫
                {% elseif medicos > 0 %}
                    > {{ medicos }} M√©dico(s) ü•º
                {% elseif enfermeros > 0 %}
                    > {{ enfermeros }} Enfermero(s) ü©∫
                {% endif %}
            {% endif %}

            {% if service.hasFieldHospital %}
            Hospital de campa√±a: S√≠ üè•
            {% endif %}
        </div>

        <div class="mt-6 text-center">
            <a href="{{ whatsapp_url }}" target="_blank" class="inline-block bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg">
                <i data-lucide="send" class="inline-block w-4 h-4 mr-2"></i>
                Compartir en WhatsApp
            </a>
        </div>
    </div>
</div>
{% endblock %}
