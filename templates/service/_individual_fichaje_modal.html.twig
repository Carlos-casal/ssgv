<!-- Individual Fichaje Modal -->
<div class="hidden fixed inset-0 bg-gray-800 bg-opacity-60 flex items-center justify-center z-50"
     data-service-form-target="individualFichajeModal">
    <div class="modal-content bg-white rounded-2xl shadow-2xl p-8 max-w-2xl w-full mx-4">
        <div class="flex justify-between items-center mb-6 border-b pb-4">
            <h3 class="text-2xl font-bold text-gray-900" data-service-form-target="individualFichajeModalTitle">Añadir Fichaje</h3>
            <button type="button" data-action="click->service-form#closeIndividualFichajeModal" class="text-gray-400 hover:text-gray-600">
                <i data-lucide="x" class="h-6 w-6"></i>
            </button>
        </div>

        <form method="post">
            <div class="mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                <p class="text-sm text-blue-800 font-medium">
                    Última salida registrada:
                    <span class="font-bold" data-service-form-target="lastClockOutTime">--:--</span>
                </p>
                <p class="text-xs text-blue-600 mt-1">La nueva hora de entrada no puede ser anterior a esta hora.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
                <div class="form-group">
                    <label for="individual-start-date" class="block text-sm font-medium text-gray-700">Fecha Entrada <span class="text-red-500">*</span></label>
                    <input type="date" id="individual-start-date" name="start_date" required
                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                </div>
                <div class="form-group">
                    <label for="individual-start-time" class="block text-sm font-medium text-gray-700">Hora Entrada <span class="text-red-500">*</span></label>
                    <input type="time" id="individual-start-time" name="start_time" required
                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                </div>
                <div class="form-group">
                    <label for="individual-end-date" class="block text-sm font-medium text-gray-700">Fecha Salida</label>
                    <input type="date" id="individual-end-date" name="end_date"
                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                </div>
                <div class="form-group">
                    <label for="individual-end-time" class="block text-sm font-medium text-gray-700">Hora Salida</label>
                    <input type="time" id="individual-end-time" name="end_time"
                           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                </div>
            </div>

            <div class="form-group mb-6">
                <label for="individual-notes" class="block text-sm font-medium text-gray-700">Notas / Comentarios</label>
                <textarea id="individual-notes" name="notes" rows="3"
                          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
                          placeholder="Ej: Pausa para comer, llegada tarde, etc."></textarea>
            </div>

            <div class="flex justify-end space-x-4 border-t pt-4">
                <button type="button" data-action="click->service-form#closeIndividualFichajeModal"
                        class="px-6 py-2 bg-gray-200 text-gray-800 font-semibold rounded-lg shadow-md hover:bg-gray-300">
                    Cancelar
                </button>
                <button type="button" data-action="click->service-form#saveAndAddAnother"
                        class="px-6 py-2 bg-green-600 text-white font-semibold rounded-lg shadow-md hover:bg-green-700">
                    Guardar y Añadir Otro
                </button>
                <button type="submit"
                        class="px-6 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700">
                    Guardar y Cerrar
                </button>
            </div>
        </form>
    </div>
</div>