{% use "form_div_layout.html.twig" %}

{# Bloques por defecto para la mayor√≠a de los campos #}
{%- block form_widget_simple -%}
    {% set base_class = 'p-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full' %}
    {% if type is defined and (type == 'checkbox' or type == 'radio') %}
        {% set base_class = 'h-4 w-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500' %}
    {% endif %}

    {% set attr = attr|merge({
        'class': (attr.class|default('') ~ ' ' ~ base_class)|trim
    }) %}

    {{- parent() -}}
{%- endblock form_widget_simple -%}

{%- block textarea_widget -%}
    {% set attr = attr|merge({
        'class': (attr.class|default('') ~ ' p-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full')|trim
    }) %}
    {{- parent() -}}
{%- endblock textarea_widget -%}

{%- block choice_widget_collapsed -%}
    {% set attr = attr|merge({
        'class': (attr.class|default('') ~ ' p-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 w-full')|trim
    }) %}
    {{- parent() -}}
{%- endblock choice_widget_collapsed -%}


{# Bloques personalizados para etiquetas flotantes #}
{%- block floating_label_row -%}
    <div class="relative">
        {{ form_widget(form) }}
        {{ form_label(form) }}
    </div>
    {{ form_errors(form) }}
{%- endblock floating_label_row -%}

{%- block floating_label_widget -%}
    {% set attr = attr|merge({
        'class': (attr.class|default('') ~ ' block px-2.5 pb-2.5 pt-4 w-full text-sm text-gray-900 bg-transparent rounded-lg border-1 border-gray-300 appearance-none dark:text-white dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer')|trim,
        'placeholder': ' '
    }) %}
    {{- block('form_widget_simple') -}}
{%- endblock floating_label_widget -%}

{%- block floating_label_label -%}
    {% if label is not same as(false) %}
        {% if not compound %}
            {% set label_attr = label_attr|merge({'for': id}) %}
        {% endif %}
        {% if required %}
            {% set label_attr = label_attr|merge({'class': (label_attr.class|default('') ~ ' required')|trim}) %}
        {% endif %}
        {% if label is empty %}
            {% if label_format is not empty %}
                {% set label = label_format|replace({
                    '%name%': name,
                    '%id%': id,
                }) %}
            {% else %}
                {% set label = name|humanize %}
            {% endif %}
        {% endif %}
        {% set label_attr = label_attr|merge({
            'class': (label_attr.class|default('') ~ ' absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white dark:bg-gray-900 px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto start-1')|trim
        }) %}
        <label {% for attrname, attrvalue in label_attr %} {{ attrname }}="{{ attrvalue }}"{% endfor %}>
            {{- label -}}
            {% if required -%}
                <span class="required" title="Este campo es obligatorio">*</span>
            {%- endif -%}
        </label>
    {% endif %}
{%- endblock floating_label_label -%}

{%- block form_errors -%}
    {% if errors|length > 0 %}
        <p class="mt-2 text-xs text-red-600 dark:text-red-400">
            {% for error in errors %}
                <span class="font-medium">{{ error.message }}</span>
            {% endfor %}
        </p>
    {% endif %}
{%- endblock form_errors -%}
