{# templates/volunteer/registration_form.html.twig #}

{% extends 'base.html.twig' %}

{% block title %}Inscripción de Voluntarios{% endblock %}

{% block body %}
    <div class="container mx-auto p-4">
        <h1 class="text-2xl font-bold mb-6">Formulario de Inscripción de Voluntarios</h1>

        {# Mostrar mensajes flash #}
        {% for message in app.flashes('success') %}
            <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4" role="alert">
                <span class="block sm:inline">{{ message }}</span>
            </div>
        {% endfor %}
        {% for message in app.flashes('error') %}
            <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
                <span class="block sm:inline">{{ message }}</span>
            </div>
        {% endfor %}

        {{ form_start(form, {'attr': {'class': 'bg-white p-6 rounded-lg shadow-md'}}) }}

            {# Sección: Datos Personales #}
            <h2 class="text-xl font-semibold mt-6 mb-4">--- Datos Personales ---</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>{{ form_row(form.name) }}</div>
                <div>{{ form_row(form.lastName) }}</div>
                <div>{{ form_row(form.dni) }}</div>
                <div>{{ form_row(form.dateOfBirth) }}</div>
                <div>{{ form_row(form.streetType) }}</div>
                <div>{{ form_row(form.address) }}</div>
                <div>{{ form_row(form.postalCode) }}</div>
                <div>{{ form_row(form.province) }}</div>
                <div>{{ form_row(form.city) }}</div>
                <div>{{ form_row(form.phone) }}</div>
            </div>

            {# Sección: Datos de Contacto de Emergencia #}
            <h2 class="text-xl font-semibold mt-6 mb-4">--- Datos de Contacto de Emergencia ---</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>{{ form_row(form.contactPerson1) }}</div>
                <div>{{ form_row(form.contactPhone1) }}</div>
                <div>{{ form_row(form.contactPerson2) }}</div>
                <div>{{ form_row(form.contactPhone2) }}</div>
            </div>

            {# Sección: Datos de Salud #}
            <h2 class="text-xl font-semibold mt-6 mb-4">--- Datos de Salud ---</h2>
            <div class="mb-4">
                {{ form_row(form.allergies) }}
            </div>

            {# Sección: Datos Profesionales #}
            <h2 class="text-xl font-semibold mt-6 mb-4">--- Datos Profesionales ---</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>{{ form_row(form.profession) }}</div>
                <div>{{ form_row(form.employmentStatus) }}</div>
            </div>
            <div class="mb-4">
                <label class="block text-gray-700 text-sm font-bold mb-2">Permiso de Conducción</label>
                {{ form_widget(form.drivingLicenses) }} {# Muestra los checkboxes #}
                {{ form_errors(form.drivingLicenses) }}
            </div>
            <div class="mb-4">
                {{ form_row(form.drivingLicenseExpiryDate) }}
            </div>

            {# Sección: Otros Datos e Intereses #}
            <h2 class="text-xl font-semibold mt-6 mb-4">--- Otros Datos e Intereses ---</h2>
            <div class="mb-4">
                {{ form_row(form.languages) }}
            </div>
            <div class="mb-4">
                {{ form_row(form.motivation) }}
            </div>
            <div class="mb-4">
                {{ form_row(form.howKnown) }}
            </div>
            <div class="mb-4">
                <label class="block text-gray-700 text-sm font-bold mb-2">¿Ha realizado funciones de voluntariado con anterioridad?</label>
                {{ form_widget(form.hasVolunteeredBefore) }}
                {{ form_errors(form.hasVolunteeredBefore) }}
            </div>
            <div class="mb-4">
                {{ form_row(form.previousVolunteeringInstitutions) }}
            </div>
            <div class="mb-4">
                {{ form_row(form.otherQualifications) }}
            </div>
            <div class="mb-4">
                <label class="block text-gray-700 text-sm font-bold mb-2">Permisos de Navegación</label>
                {{ form_widget(form.navigationLicenses) }}
                {{ form_errors(form.navigationLicenses) }}
            </div>

            {# Sección: Titulaciones Específicas (AHORA AGRUPADAS) #}
            <h2 class="text-xl font-semibold mt-6 mb-4">--- Titulaciones Específicas ---</h2>
            <div class="mb-4">
                {# Renderiza el nuevo campo de titulaciones específicas como checkboxes #}
                {{ form_row(form.specificQualifications) }}
            </div>

            {# Sección: Rol y Especialización #}
            <h2 class="text-xl font-semibold mt-6 mb-4">--- Rol y Especialización ---</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>{{ form_row(form.role) }}</div>
                <div>{{ form_row(form.specialization) }}</div>
            </div>

            {# Sección: Datos de Acceso #}
            <h2 class="text-xl font-semibold mt-6 mb-4">--- Datos de Acceso ---</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>{{ form_row(form.user.email) }}</div>
                <div>{{ form_row(form.user.password) }}</div>
            </div>

            <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mt-6">
                Enviar Solicitud
            </button>

        {{ form_end(form) }}
    </div>
{% endblock %}